"use strict";(self["webpackChunkgallery_project"]=self["webpackChunkgallery_project"]||[]).push([[239],{6327:function(e,t,l){l.d(t,{Z:function(){return I}});var s=l(3396);const i={class:"relative img-wrapper"},a=["src"];function o(e,t,l,o,n,r){const d=(0,s.up)("modal"),u=(0,s.up)("delete-modal");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("img",{onClick:t[0]||(t[0]=(...e)=>r.showDetailedPage&&r.showDetailedPage(...e)),class:"pointer",src:l.photo.url,alt:""},null,8,a),"gallery"===e.$route.name&&n.visible?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"add-to-album",onClick:t[1]||(t[1]=(...e)=>r.showModal&&r.showModal(...e))},"ADD TO ALBUM")):(0,s.kq)("",!0),"gallery"!==e.$route.name&&n.visible?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"add-to-album",onClick:t[2]||(t[2]=(...e)=>r.showModal&&r.showModal(...e))},"DELETE ITEM")):(0,s.kq)("",!0),"gallery"===e.$route.name?((0,s.wg)(),(0,s.j4)(d,{key:2,onClose:t[3]||(t[3]=e=>n.modalIsVisible=!1),visible:n.modalIsVisible,item:l.photo},null,8,["visible","item"])):(0,s.kq)("",!0),"gallery"!==e.$route.name?((0,s.wg)(),(0,s.j4)(u,{key:3,onClose:t[4]||(t[4]=e=>n.modalIsVisible=!1),visible:n.modalIsVisible,item:l.photo},null,8,["visible","item"])):(0,s.kq)("",!0)])}var n=l(65),r=l(8780),d=l(7139);const u={key:0,class:"modal"},m={class:"modal-content"},c=(0,s._)("div",{class:"modal-body flex justify-content-center"},[(0,s._)("h2",null,"Are you sure you want to delete this item?")],-1),h={key:0,class:"validation mt-5"},g={class:"mt-5"},v={class:"flex justify-content-center"},w={class:"mt-5"};function b(e,t,l,i,a,o){return(0,s.wg)(),(0,s.iD)("div",null,[l.visible?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",m,[c,a.errorMsg?((0,s.wg)(),(0,s.iD)("div",h,(0,d.zw)(a.errorMsg),1)):(0,s.kq)("",!0),(0,s._)("div",g,[(0,s._)("div",v,[(0,s._)("div",w,[(0,s._)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"button-line min-width-150"},"CANCEL"),(0,s._)("button",{onClick:t[1]||(t[1]=(...e)=>o.deleteItem&&o.deleteItem(...e)),class:"ml-5 min-width-150"},"DELETE")])])])])])):(0,s.kq)("",!0)])}var p={name:"DeleteModalPage",props:{visible:{default:!1},item:{}},data(){return{errorMsg:null}},methods:{...(0,n.nv)("gallery",{addNewAlbum:"addNewAlbum",addInAlbum:"addInAlbum",deleteItemAction:"deleteItem"}),...(0,n.nv)({show:"show"}),newTab(e){this.activeTab=e},deleteItem(){try{this.deleteItemAction({item:this.item,in:this.$route.params.id}),this.show()}catch(e){this.errorMsg=e.message}this.$emit("close")}}},y=l(89);const _=(0,y.Z)(p,[["render",b]]);var k=_,f={name:"LayoutItem",components:{Modal:r.Z,DeleteModal:k},data(){return{visible:!1,modalIsVisible:!1}},props:{photo:{type:Object,required:!0}},methods:{...(0,n.nv)("gallery",{setNewItem:"setNewItem"}),showDetailedPage(){this.setNewItem({...this.photo,upload_date:new Date,id:this.photo.id}),this.$router.push("/details-page/"+this.photo.id)},showModal(){this.modalIsVisible=!0}}};const D=(0,y.Z)(f,[["render",o]]);var I=D},8780:function(e,t,l){l.d(t,{Z:function(){return k}});var s=l(3396),i=l(7139),a=l(9242);const o={key:0,class:"modal"},n={class:"modal-content"},r={class:"modal-body flex justify-content-center"},d={class:"mt-5"},u={key:0},m={key:1},c=(0,s._)("option",{value:"Select an album",disabled:""},"Select an album...",-1),h=["value"],g={key:2,class:"validation mt-5"},v={class:"flex justify-content-center mt-5"};function w(e,t,l,w,b,p){return(0,s.wg)(),(0,s.iD)("div",null,[l.visible?((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",n,[(0,s._)("div",r,[(0,s._)("h5",{onClick:t[0]||(t[0]=e=>p.newTab(1)),class:(0,i.C_)([{grey:1!==b.activeTab},"tab"])},"CREATE NEW ALBUM",2),(0,s._)("h5",{onClick:t[1]||(t[1]=e=>p.newTab(2)),class:(0,i.C_)([{grey:2!==b.activeTab},"tab ml-5"])},"ADD TO EXISTING",2)]),(0,s._)("div",d,[1===b.activeTab?((0,s.wg)(),(0,s.iD)("div",u,[(0,s.wy)((0,s._)("input",{onInput:t[2]||(t[2]=e=>b.errorMsg=null),class:"new-album-input","onUpdate:modelValue":t[3]||(t[3]=e=>b.albumTitle=e),type:"text",placeholder:"Enter title here"},null,544),[[a.nr,b.albumTitle]])])):((0,s.wg)(),(0,s.iD)("div",m,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>b.selected=e)},[c,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.albums,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.name,value:e.name},(0,i.zw)(e.name),9,h)))),128))],512),[[a.bM,b.selected]])])),b.errorMsg?((0,s.wg)(),(0,s.iD)("div",g,(0,i.zw)(b.errorMsg),1)):(0,s.kq)("",!0),(0,s._)("div",v,[(0,s._)("div",null,[(0,s._)("button",{onClick:t[5]||(t[5]=t=>e.$emit("close")),class:"button-line min-width-150-large-window"},"CANCEL")]),(0,s._)("div",null,[(0,s._)("button",{onClick:t[6]||(t[6]=(...e)=>p.saveAlbum&&p.saveAlbum(...e)),class:"ml-5 min-width-150"},"SAVE")])])])])])):(0,s.kq)("",!0)])}var b=l(65),p={name:"ModalPage",props:{visible:{default:!1},item:{}},computed:{...(0,b.Se)("gallery",{albums:"allAlbums"})},data(){return{activeTab:1,selected:"Select an album",albumTitle:null,errorMsg:null}},methods:{...(0,b.nv)("gallery",{addNewAlbum:"addNewAlbum",addInAlbum:"addInAlbum"}),...(0,b.nv)({show:"show"}),newTab(e){this.errorMsg=null,this.activeTab=e},saveAlbum(){if(1===this.activeTab){if(null===this.albumTitle)return void(this.errorMsg="Please enter an album name");try{this.addNewAlbum({name:this.albumTitle,item:this.item,id:this.albums.length+1,upload_date:new Date}),this.show()}catch(e){return this.errorMsg=e.message,void(this.albumTitle=null)}this.albumTitle=null}else{if("Select an album"===this.selected)return void(this.errorMsg="Please select item in dropdown");this.addInAlbum({name:this.selected,item:this.item}),this.show()}this.$emit("close")}}},y=l(89);const _=(0,y.Z)(p,[["render",w]]);var k=_},239:function(e,t,l){l.r(t),l.d(t,{default:function(){return g}});var s=l(3396);const i={key:0,class:"overlay"},a=(0,s._)("div",{class:"overlay__inner"},[(0,s._)("div",{class:"overlay__content"},[(0,s._)("span",{class:"spinner"})])],-1),o=[a],n={class:"page-container"},r={class:"layout"};function d(e,t,l,a,d,u){const m=(0,s.up)("LayoutItem");return(0,s.wg)(),(0,s.iD)("div",null,[d.loading?((0,s.wg)(),(0,s.iD)("div",i,o)):(0,s.kq)("",!0),(0,s._)("div",n,[(0,s._)("div",r,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.photos,((e,t)=>((0,s.wg)(),(0,s.j4)(m,{onMouseenter:e=>u.mouseEntered(t),onMouseleave:e=>u.mouseLeave(t),ref_for:!0,ref:"item-"+t,key:t,photo:e,index:t},null,8,["onMouseenter","onMouseleave","photo","index"])))),128))]),(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>u.getPhotos&&u.getPhotos(...e)),class:"mt-5"},"LOAD MORE")])])}var u=l(6327),m={name:"GalleryPage",components:{LayoutItem:u.Z},data(){return{photos:[],loading:!1}},methods:{async getPhotos(){this.loading=!0;let e=await(await fetch("https://picsum.photos/v2/list?limit=30")).json();e.forEach((async(e,t,l)=>{let s=await this.getBase64Image(e.download_url);this.photos.push({author:e.author,download_url:e.download_url,url:s,id:(new Date).getTime()}),t===l.length-1&&setTimeout((()=>{this.loading=!1}),1e3)}))},getBase64Image(e){return new Promise((t=>{const l=new Image;l.setAttribute("crossOrigin","anonymous"),l.src=e,l.onload=()=>{const e=document.createElement("canvas");let s=500,i=500,a=l.width,o=l.height;a>o?a>s&&(o*=s/a,a=s):o>i&&(a*=i/o,o=i),e.width=a,e.height=o;let n=e.getContext("2d");n.drawImage(l,0,0,a,o),t(e.toDataURL("image/jpeg",.35))}}))},mouseEntered(e){this.$refs["item-"+e][0].visible=!0},mouseLeave(e){this.$refs["item-"+e][0].visible=!1}},mounted(){this.getPhotos(),window.onscroll=()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight&&(this.loading||this.getPhotos())}}},c=l(89);const h=(0,c.Z)(m,[["render",d]]);var g=h}}]);
//# sourceMappingURL=239.60f60418.js.map